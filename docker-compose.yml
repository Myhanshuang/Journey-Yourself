services:
  journey:
    #build: .
    image: journey-my-dairy:latest
    container_name: journey-app
    ports:
      - "8000:8000"
    volumes:
      - ./data:/app/data
    env_file:
      - .env
    environment:
      # 数据库配置
      - DATABASE_URL=sqlite:///./data/journey.db
      # MediaCrawler 服务地址 - 从 .env 文件读取
      # 如需覆盖，取消注释并修改：
      # - MEDIACRAWLER_URL=http://172.17.0.1:8080
    extra_hosts:
      - "host.docker.internal:host-gateway"
    restart: unless-stopped

volumes:
  data:
